bind R source-file ~/.tmux.conf

set -g base-index 1
setw -g pane-base-index 1

# template https://github.com/gpakosz/.tmux/blob/master/.tmux.conf

set -g prefix C-a
setw -g mode-keys vi

set-option -g detach-on-destroy off

bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

bind - split-window -v
bind _ split-window -h

bind-key r command-prompt "rename-session '%%'"
bind-key , command-prompt "rename-window '%%'"
bind-key + break-pane 


bind -r H resize-pane -L 2
bind -r J resize-pane -D 2
bind -r K resize-pane -U 2
bind -r P resize-pane -R 2

bind-key Z kill-session
bind-key z kill-pane # skip "kill-pane 1? (y/n)" prompt
bind-key L switch-client -l
bind-key q last-window


#disable arrow keys
unbind Left
unbind Down
unbind Up
unbind Right

unbind C-Up   
unbind C-Down 
unbind C-Left 
unbind C-Right

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @dracula-show-powerline true
set -g @dracula-plugins "ram-usage"

# it can accept `hostname` (full hostname), `session`, `shortname` (short name), `smiley`, `window`, or any character.
set -g @dracula-show-left-icon session
set -g @plugin 'dracula/tmux'

set -g @plugin 'jimeh/tmuxifier'

run '~/.tmux/plugins/tpm/tpm'

bind-key " " run-shell "sesh connect \"$(
	sesh list | fzf-tmux -p 75%,60% \
		--no-sort --border-label ' sesh ' --prompt '⚡  ' \
		--header '  (A)ll (S)sessions (D)configs (X)zoxide (G)kill (F)ind' \
		--bind 'tab:down,btab:up' \
		--bind 'ctrl-a:change-prompt(⚡  )+reload(sesh list)' \
		--bind 'ctrl-s:change-prompt(🪟  )+reload(sesh list -t)' \
		--bind 'ctrl-d:change-prompt(⚙️  )+reload(sesh list -c)' \
		--bind 'ctrl-x:change-prompt(📁  )+reload(sesh list -z)' \
		--bind 'ctrl-f:change-prompt(🔎  )+reload(fd -H -d 2 -t d -E .Trash . ~)' \
		--bind 'ctrl-g:execute(tmux kill-session -t {})+change-prompt(⚡  )+reload(sesh list)'
)\""

bind-key "0" run-shell "sesh connect main"
bind-key "m" run-shell "sesh connect main"
bind-key "i" run-shell "sesh connect _dotfiles"

bind-key "o" run-shell "tmuxifier list-windows | fzf-tmux -p 75%,60% --no-sort \
    --border-label ' load layout '\
    --prompt '⚡  ' |\
    xargs -r tmuxifier load-window
 "

